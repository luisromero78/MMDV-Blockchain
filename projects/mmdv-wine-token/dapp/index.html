<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MWT5 ‚Äì MMDV Wine Token ¬∑ Proyecto Educativo</title>

  <!-- Estilos globales MMDV (ajusta la ruta si hace falta) -->
  <link rel="stylesheet" href="../assets/style.css">

  <style>
    /* Ajustes ligeros para esta p√°gina, encima de tu CSS global */
    main {
      padding-bottom: 4rem;
    }

    .hero-educativa {
      padding: 3rem 0 2rem;
      background: radial-gradient(circle at top left, #3b1633 0, #0a0508 45%, #050308 100%);
      color: #fff;
    }

    .hero-educativa h1 {
      font-size: 2.4rem;
      margin-bottom: 0.75rem;
    }

    .hero-educativa p {
      max-width: 700px;
      line-height: 1.6;
    }

    .hero-pill {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      padding: .35rem .9rem;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      font-size: .85rem;
      margin-bottom: .75rem;
    }

    .hero-pill span {
      font-weight: 600;
      letter-spacing: .03em;
      text-transform: uppercase;
      font-size: .75rem;
    }

    .hero-meta {
      margin-top: 1rem;
      font-size: .9rem;
      opacity: .85;
    }

    .hero-meta code {
      font-family: "JetBrains Mono", monospace;
      font-size: .78rem;
      padding: .25rem .5rem;
      border-radius: .4rem;
      background: rgba(0,0,0,.35);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(240px,1fr));
      gap: 1.25rem;
    }

    .card {
      background: #0b0610;
      border-radius: 1rem;
      padding: 1.25rem 1.3rem;
      border: 1px solid rgba(255,255,255,.06);
      box-shadow: 0 14px 35px rgba(0,0,0,.55);
    }

    .card h2,
    .card h3 {
      font-size: 1.1rem;
      margin-bottom: .7rem;
    }

    .card small {
      opacity: .75;
      font-size: .8rem;
    }

    .stat-label {
      font-size: .8rem;
      text-transform: uppercase;
      letter-spacing: .06em;
      opacity: .7;
      margin-bottom: .15rem;
    }

    .stat-value {
      font-weight: 600;
      font-size: .98rem;
    }

    .stat-mono {
      font-family: "JetBrains Mono", monospace;
      font-size: .85rem;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: .55rem 1.1rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.2);
      background: #8a143b;
      color: #fff;
      font-size: .9rem;
      font-weight: 500;
      cursor: pointer;
      transition: background .15s ease, transform .1s ease, box-shadow .15s ease;
      text-decoration: none;
    }

    .btn:hover {
      background: #b71f4f;
      transform: translateY(-1px);
      box-shadow: 0 12px 30px rgba(0,0,0,.5);
    }

    .btn-ghost {
      background: transparent;
      border-color: rgba(255,255,255,.35);
    }

    .btn-ghost:hover {
      background: rgba(255,255,255,.04);
    }

    .btn.connected {
      background: #0c8b4a;
      border-color: #0c8b4a;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: .3rem;
      margin-bottom: .75rem;
    }

    .field-group label {
      font-size: .8rem;
      text-transform: uppercase;
      letter-spacing: .06em;
      opacity: .75;
    }

    .field-group input {
      background: #07030a;
      border-radius: .6rem;
      border: 1px solid rgba(255,255,255,.12);
      padding: .45rem .7rem;
      color: #fff;
      font-size: .9rem;
      font-family: "JetBrains Mono", monospace;
    }

    .field-group input:focus {
      outline: none;
      border-color: #b71f4f;
      box-shadow: 0 0 0 1px rgba(183,31,79,.6);
    }

    .tx-status {
      margin-top: .75rem;
      font-size: .85rem;
      min-height: 1.2rem;
    }

    .tx-status strong {
      font-family: "JetBrains Mono", monospace;
    }

    section {
      padding: 2rem 0 0;
    }

    section h2.section-title {
      font-size: 1.4rem;
      margin-bottom: .2rem;
    }

    section p.section-sub {
      font-size: .9rem;
      opacity: .8;
      margin-bottom: 1.1rem;
    }

    ul.token-rules {
      font-size: .9rem;
      opacity: .9;
      padding-left: 1.1rem;
    }

    ul.token-rules li {
      margin-bottom: .35rem;
    }

    @media (max-width: 720px) {
      .hero-educativa h1 {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="wrap">
    <nav class="top-nav">
      <a href="../../index.html" class="brand">
        <span class="brand-mark">MMDV</span>
        <span class="brand-sub">Blockchain</span>
      </a>
      <div class="nav-links">
        <a href="../../index.html">Inicio</a>
        <a href="../../projects.html">Proyectos</a>
        <a href="../../retos.html">Retos</a>
      </div>
    </nav>
  </div>
</header>

<main>
  <!-- HERO -->
  <section class="hero-educativa">
    <div class="wrap">
      <div class="row">
        <div>
          <div class="hero-pill">
            <span>MWT5 ¬∑ Proyecto educativo</span>
            <span style="opacity:.7;">Token de vino en Sepolia</span>
          </div>
          <h1>MWT5 ‚Äì MMDV Wine Token ¬∑ Proyecto Educativo</h1>
          <p>
            Esta Dapp muestra c√≥mo un <b>smart contract ERC-20</b> puede incorporar reglas
            educativas: precio simb√≥lico de salida, periodo de cancelaci√≥n, bloqueo m√≠nimo,
            bonus por antig√ºedad, prioridad para pr√≥ximos lotes y opci√≥n de recompra por
            parte del owner. Todo est√° pensado como laboratorio did√°ctico, <b>no como
            producto financiero real</b>.
          </p>
          <div class="hero-meta">
            <div>Red: <b>Sepolia Testnet</b></div>
            <div>Direcci√≥n del contrato:&nbsp;
              <code>0x8e913dEadC1F9c25a2ADc7BAD793cEf72CD02dC2</code>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- RESUMEN EDUCATIVO -->
  <section>
    <div class="wrap">
      <h2 class="section-title">¬øQu√© representa MWT5?</h2>
      <p class="section-sub">
        Un token = una botella de vino simb√≥lica. Aqu√≠ s√≥lo medimos unidades y reglas,
        no euros reales. El objetivo es <b>explicar conceptos</b>, no vender vino on-chain.
      </p>

      <div class="grid">
        <article class="card">
          <h3>Reglas educativas clave</h3>
          <ul class="token-rules">
            <li>üü£ <b>Cap educativo</b>: hasta 1.000.000 tokens enteros.</li>
            <li>üí∂ <b>Precio simb√≥lico inicial</b>: 10 unidades por token.</li>
            <li>‚è≥ <b>Cancelaci√≥n 24h</b>: el comprador puede devolver los tokens al owner.</li>
            <li>üîí <b>Bloqueo 1 a√±o</b>: no se permiten transfers a terceros antes del a√±o.</li>
            <li>üìà <b>Precio m√≠nimo de reventa</b>: +25% por a√±o completo despu√©s del primero.</li>
            <li>üéÅ <b>Bonus de fidelidad</b>: +10% de tokens tras 4 a√±os holdeando.</li>
            <li>ü™ô <b>Recompra del owner</b>: el owner puede recomprar a precio simb√≥lico fijo.</li>
            <li>üé´ <b>Prioridad</b>: quienes participan en este lote tienen preferencia en los siguientes.</li>
          </ul>
        </article>

        <article class="card">
          <h3>C√≥mo usar esta p√°gina</h3>
          <ul class="token-rules">
            <li>1Ô∏è‚É£ Explora los datos del contrato en la zona de <b>‚ÄúEstado global‚Äù</b>.</li>
            <li>2Ô∏è‚É£ Opcional: pulsa <b>‚ÄúConectar wallet‚Äù</b> para que la Dapp lea tus datos como holder.</li>
            <li>3Ô∏è‚É£ Juega con el <b>simulador de precio m√≠nimo</b> seg√∫n tu antig√ºedad.</li>
            <li>4Ô∏è‚É£ Si est√°s dentro del periodo, prueba la <b>cancelaci√≥n 24h</b> con Sepolia testnet.</li>
            <li>5Ô∏è‚É£ Si conectas con la direcci√≥n del owner, ver√°s el panel de <b>buyback</b>.</li>
          </ul>
        </article>
      </div>
    </div>
  </section>

  <!-- ESTADO GLOBAL DEL CONTRATO -->
  <section>
    <div class="wrap">
      <h2 class="section-title">Estado global del contrato</h2>
      <p class="section-sub">
        Informaci√≥n que aplica a todo el lote tokenizado MWT5.
      </p>

      <div class="grid">
        <article class="card">
          <div class="stat-label">Token</div>
          <div class="stat-value" id="tokenName">Cargando...</div>

          <div style="margin-top:.9rem;">
            <div class="stat-label">Supply emitido / Cap educativo</div>
            <div class="stat-value stat-mono" id="supplyInfo">‚Äì</div>
          </div>

          <div style="margin-top:.9rem;">
            <div class="stat-label">Owner del contrato</div>
            <div class="stat-value stat-mono" id="ownerAddress">‚Äì</div>
          </div>
        </article>

        <article class="card">
          <h3>Par√°metros simb√≥licos</h3>

          <div class="stat-label">Precio base educativo</div>
          <div class="stat-value" id="basePrice">‚Äì</div>

          <div class="stat-label" style="margin-top:.8rem;">Periodo de cancelaci√≥n</div>
          <div class="stat-value" id="cancelPeriod">‚Äì</div>

          <div class="stat-label" style="margin-top:.8rem;">Bloqueo m√≠nimo de transferencias</div>
          <div class="stat-value" id="lockPeriod">‚Äì</div>

          <div class="stat-label" style="margin-top:.8rem;">Precio simb√≥lico de recompra (owner)</div>
          <div class="stat-value" id="buybackPrice">‚Äì</div>
        </article>

        <article class="card">
          <h3>Conexi√≥n Web3</h3>
          <p style="font-size:.88rem;opacity:.85;margin-bottom:.8rem;">
            Puedes explorar todo en modo lectura sin conectar nada.  
            Si quieres interactuar con el contrato (por ejemplo, cancelaci√≥n 24h)
            conecta una wallet de prueba en Sepolia.
          </p>

          <button id="connectButton" class="btn">Conectar wallet</button>

          <div style="margin-top:.75rem;">
            <div class="stat-label">Cuenta conectada</div>
            <div class="stat-value stat-mono" id="connectedAddress">No conectada</div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- PANEL DEL HOLDER -->
  <section>
    <div class="wrap">
      <h2 class="section-title">Panel del holder</h2>
      <p class="section-sub">
        Aqu√≠ puedes ver c√≥mo aplican las reglas al titular de una direcci√≥n concreta.
      </p>

      <div class="grid">
        <article class="card">
          <h3>Direcci√≥n a inspeccionar</h3>

          <div class="field-group">
            <label for="manualAddressInput">Direcci√≥n (opcional)</label>
            <input id="manualAddressInput" type="text"
                   placeholder="0x... Si se deja vac√≠o, usa la wallet conectada">
          </div>

          <button id="refreshHolderButton" class="btn-ghost btn">Ver datos del holder</button>

          <div style="margin-top:.9rem;">
            <div class="stat-label">Holder actual</div>
            <div class="stat-value stat-mono" id="holderAddress">‚Äì</div>
          </div>
        </article>

        <article class="card">
          <h3>Posici√≥n educativa</h3>

          <div class="stat-label">Balance actual (on-chain)</div>
          <div class="stat-value" id="holderBalance">‚Äì</div>

          <div class="stat-label" style="margin-top:.7rem;">Cantidad asociada al tracking educativo</div>
          <div class="stat-value" id="holderTrackedAmount">‚Äì</div>

          <div class="stat-label" style="margin-top:.7rem;">Primera compra registrada</div>
          <div class="stat-value" id="holderFirstPurchase">‚Äì</div>

          <div class="stat-label" style="margin-top:.7rem;">Prioridad en futuros lotes</div>
          <div class="stat-value" id="holderPriority">‚Äì</div>
        </article>

        <article class="card">
          <h3>Valor, bonus y m√≠nimos</h3>

          <div class="stat-label">Multiplicador te√≥rico por antig√ºedad</div>
          <div class="stat-value" id="holderMultiplier">‚Äì</div>

          <div class="stat-label" style="margin-top:.7rem;">Bonus de fidelidad potencial (4 a√±os)</div>
          <div class="stat-value" id="holderLoyaltyBonus">‚Äì</div>

          <div class="stat-label" style="margin-top:.7rem;">Precio m√≠nimo educativo de reventa</div>
          <div class="stat-value" id="holderMinResale">‚Äì</div>
        </article>
      </div>
    </div>
  </section>

  <!-- SIMULADOR DE PRECIO -->
  <section>
    <div class="wrap">
      <h2 class="section-title">Simulador de precio m√≠nimo</h2>
      <p class="section-sub">
        Introduce un precio simb√≥lico por token y deja que el contrato te diga
        si respeta las reglas educativas de MWT5.
      </p>

      <div class="grid">
        <article class="card">
          <h3>Validar precio propuesto</h3>

          <div class="field-group">
            <label for="proposedPriceInput">Precio propuesto (unidades por token)</label>
            <input id="proposedPriceInput" type="number" min="0" step="1"
                   placeholder="Ej. 15">
          </div>

          <button id="validatePriceButton" class="btn">Validar precio</button>

          <div class="tx-status" id="proposedPriceResult"></div>
        </article>

        <article class="card">
          <h3>Lectura recomendada</h3>
          <p style="font-size:.88rem;opacity:.9;">
            Esta l√≥gica de m√≠nimos educativos est√° programada dentro del smart contract,
            no en la interfaz. La Dapp simplemente llama a
            <code>validateResalePrice()</code> y muestra la respuesta.  
            Es una buena forma de explicar el concepto de "reglas de mercado on-chain".
          </p>
        </article>
      </div>
    </div>
  </section>

  <!-- ACCIONES EDUCATIVAS -->
  <section>
    <div class="wrap">
      <h2 class="section-title">Acciones educativas (requieren wallet)</h2>
      <p class="section-sub">
        Estas funciones env√≠an transacciones reales en la testnet de Sepolia.
        Aseg√∫rate de usar s√≥lo cuentas y ETH de prueba.
      </p>

      <div class="grid">
        <!-- Cancelaci√≥n 24h -->
        <article class="card">
          <h3>Cancelaci√≥n dentro de 24h</h3>
          <p style="font-size:.88rem;opacity:.9;margin-bottom:.7rem;">
            Permite al comprador devolver tokens al owner durante las primeras 24h
            desde su primera compra. El reembolso econ√≥mico se simula fuera de la
            cadena; aqu√≠ s√≥lo se registra el movimiento de tokens.
          </p>

          <div class="field-group">
            <label for="cancelAmountInput">Cantidad a devolver (tokens)</label>
            <input id="cancelAmountInput" type="number" min="0" step="1">
          </div>

          <button id="cancelButton" class="btn">Ejecutar cancelaci√≥n 24h</button>
        </article>

        <!-- Buyback del owner -->
        <article class="card">
          <h3>Buyback del owner (demo)</h3>
          <p style="font-size:.88rem;opacity:.9;margin-bottom:.7rem;">
            S√≥lo deber√≠a usarlo la cuenta owner del contrato.  
            El pago en dinero es externo; on-chain s√≥lo movemos tokens y dejamos
            una traza mediante el evento <code>OwnerBuyback</code>.
          </p>

          <div class="field-group">
            <label for="buybackSellerInput">Direcci√≥n del vendedor</label>
            <input id="buybackSellerInput" type="text" placeholder="0x...">
          </div>

          <div class="field-group">
            <label for="buybackAmountInput">Cantidad a recomprar (tokens)</label>
            <input id="buybackAmountInput" type="number" min="0" step="1">
          </div>

          <button id="buybackButton" class="btn-ghost btn">Ejecutar buyback (owner)</button>
        </article>

        <!-- Estado de transacciones -->
        <article class="card">
          <h3>Estado de transacciones</h3>
          <p style="font-size:.88rem;opacity:.9;margin-bottom:.7rem;">
            Aqu√≠ ver√°s el hash, bloque y posibles errores de las operaciones
            que ejecutas desde esta Dapp.
          </p>

          <div class="tx-status" id="txStatus">Sin transacciones a√∫n.</div>
        </article>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="wrap">
    <p style="font-size:.8rem;opacity:.7;padding:1.5rem 0 2rem;">
      Proyecto educativo ¬∑ MMDV Wine Token V5 ¬∑ Sepolia Testnet ¬∑
      No constituye oferta de inversi√≥n ni producto financiero.
    </p>
  </div>
</footer>

<!-- Ethers + l√≥gica de la Dapp -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.13.0/dist/ethers.umd.min.js"></script>
<script src="app.js"></script>
</body>
</html>
