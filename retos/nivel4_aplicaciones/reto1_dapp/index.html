<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reto 5 ¬∑ dApp de Votaci√≥n ¬∑ MMDV</title>
  <meta name="description" content="Interfaz Web3 para el Smart Contract de votaci√≥n (Sepolia)." />
  <meta name="theme-color" content="#7A1535" />
  <link rel="icon" href="/MMDV-Blockchain/assets/favicon.ico" />
  <!-- Ethers v6 desde CDN -->
    <style>
    :root{
      --bg:#111216;--card:#1b1c21;--ink:#f5f6f7;--muted:#a7abb2;--accent:#7A1535;--stroke:rgba(122,21,53,.42)
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .wrap{max-width:980px;margin:0 auto;padding:26px 18px 80px}
    header{padding:42px 0 18px;border-bottom:1px solid var(--stroke)}
    h1{margin:0;font-size:28px;letter-spacing:.2px}
    p.lead{color:var(--muted);margin:8px 0 0}
    .row{display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center;margin-top:14px}
    button{background:var(--accent);color:#fff;border:0;border-radius:14px;padding:10px 14px;font-weight:600;cursor:pointer;box-shadow:0 8px 24px rgba(122,21,53,.24)}
    button:disabled{opacity:.6;cursor:not-allowed}
    .pill{display:inline-flex;gap:10px;align-items:center;background:#0f0f12;border:1px solid var(--stroke);border-radius:999px;padding:8px 12px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;margin-top:22px}
    .card{background:var(--card);border:1px solid #22232a;border-radius:18px;padding:16px}
    .card h3{margin:0 0 6px;font-size:18px}
    .muted{color:var(--muted)}
    .bar{height:8px;border-radius:999px;background:#22232a;overflow:hidden}
    .fill{height:100%;background:linear-gradient(90deg,var(--accent),#c6527b)}
    .footer{margin-top:40px;color:var(--muted);font-size:14px}
    .status{margin-top:10px;white-space:pre-wrap}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,monospace}
    .warn{color:#ffd27d}
    .ok{color:#79ffa8}
    .err{color:#ff8080}
      /* === Estilo especial para el ganador === */
#winner {
  background: linear-gradient(90deg, #7A1535 0%, #d8a2b3 100%);
  color: #fff;
  border: none;
  box-shadow: 0 0 18px rgba(218,180,200,0.25);
  font-weight: 600;
  letter-spacing: .3px;
  position: relative;
  padding-left: 32px;
}
#winner::before {
  content: "üèÜ";
  position: absolute;
  left: 10px;
  font-size: 20px;
}
/* ===== Breadcrumb ===== */
.breadcrumb {
  margin:14px 0 22px;
  font-size:15px;
  color:var(--muted);
}
.breadcrumb a {
  color:var(--accent-2);
  text-decoration:none;
  transition:color .2s ease;
}
.breadcrumb a:hover {
  color:var(--accent);
  text-decoration:underline;
}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <nav class="breadcrumb">
  <a href="/MMDV-Blockchain/retos">Retos</a> ‚Ä∫ 
  <span>Nivel 4 ¬∑</span> 
  <strong>Reto 1 ¬∑ dApp de Votaci√≥n</strong>
</nav>

  <h1>Reto 5 ¬∑ dApp de Votaci√≥n (Sepolia)</h1>
  <p class="lead">Interfaz Web3 (HTML + JS + Ethers) para el contrato del <strong>Reto 4</strong>. Conecta tu wallet, visualiza candidatos y emite tu voto on-chain.</p>
<nav class="breadcrumb" style="margin:14px 0 22px;font-size:15px;color:var(--muted)">
  <a href="/MMDV-Blockchain/retos.html" style="color:var(--accent-2);text-decoration:none;">Retos</a>
  <span> ‚Ä∫ </span>
  <span>Nivel 4</span>
  <span> ‚Ä∫ </span>
  <strong>Reto 1 ¬∑ dApp de Votaci√≥n</strong>
</nav>

  <div class="row">
    <div class="pill">
      <span>Red objetivo:</span>
      <strong class="mono" id="net">‚Äî</strong>
    </div>
    <!-- bot√≥n peque√±o a la derecha -->
    <button data-connect>Conectar wallet</button>
  </div>

  
  <div id="accountLine" class="muted" style="margin-top:8px"></div>
</header>


<section class="row" style="margin-top:18px">
  <div class="pill">
    <span>Contrato:</span>
    <span class="mono" id="addr">‚Äî</span>
  </div>

  <div style="display:flex;gap:8px;align-items:center">
    <div class="pill"><span>Estado:</span><span id="state">Listo</span></div>
    <div id="winner" class="pill" style="display:none"></div>
    <button id="btnClose" style="display:none;background:#333;border:1px solid var(--stroke);border-radius:14px;padding:10px 14px;font-weight:600;cursor:pointer">Cerrar votaci√≥n</button>
    <button id="btnOpen"  style="display:none;background:#333;border:1px solid var(--stroke);border-radius:14px;padding:10px 14px;font-weight:600;cursor:pointer">Abrir votaci√≥n</button>
    <button data-disconnect style="display:none;background:#333;border:1px solid var(--stroke);border-radius:14px;padding:10px 14px;font-weight:600;cursor:pointer">Desconectar</button>
  </div>
</section>



    <section>
      <h2 style="margin:26px 0 8px">Candidatos</h2>
      <div id="cards" class="grid"></div>
      <div id="empty" class="muted" style="margin-top:10px;display:none">No hay candidatos o no se pudo cargar la lista. Revisa el ABI.</div>
    </section>

    <section class="footer">
      <div class="status" id="log">üìú Listo.</div>
      <p style="margin-top:12px">Consejo: aseg√∫rate de estar en <strong>Sepolia</strong> (chainId <code class="mono">11155111</code>) y de haber pegado el <strong>ABI</strong> y la <strong>direcci√≥n</strong> correctos del contrato.
      </p>
    </section>
  </div>



  <!--
  üß© INSTRUCCIONES R√ÅPIDAS
  1) Reemplaza CONTRACT_ADDRESS con tu direcci√≥n desplegada en Sepolia.
  2) Pega el ABI JSON del contrato del Reto 4 en CONTRACT_ABI.
     ¬∑ Si tu contrato tiene getCandidates(): perfecto (name, votes, id)
     ¬∑ Si no, aporta totalCandidates() y candidates(i) -> (name, votes)
  3) Sube este index.html a /MMDV-Blockchain/retos/reto5/ en tu repo.
  4) Activa GitHub Pages (branch main, carpeta /root o /docs) o sirve desde la ruta del repo.
  5) Abre la p√°gina con MetaMask en Sepolia, conecta y vota.

  üìé Bloque ‚ÄúRecursos t√©cnicos‚Äù (opcional, estilo MMDV)
  Inserta antes de </main> o al final del <body>:
    <div id="recursos"></div>
    <script src="/MMDV-Blockchain/templates/recursos_template.js"></script>
    <script>
      recursosMMDV({
        titulo: "Recursos t√©cnicos",
        pdf: "Documentacion_Reto5_MMDV-clean.pdf",
        presentacion: "MMDV_Reto5_Presentacion.pdf",
        codigo: "index.html",
        csv: ""
      });
    </script>
  -->
  <script type="module" src="app.js"></script>
</body>
</html>

